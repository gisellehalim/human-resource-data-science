# -*- coding: utf-8 -*-
"""Prediction.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1JeqYt9_fD7u0JUbmzfzP5vclxtQ-EXgy
"""

pip install joblib

import pandas as pd
import joblib
import warnings
warnings.filterwarnings("ignore")

# Load data
df =  pd.read_csv('https://raw.githubusercontent.com/dicodingacademy/dicoding_dataset/main/employee/employee_data.csv')

# Menghapus kolom yang tidak terpakai
df = df.drop(['EmployeeId', 'StandardHours', 'EmployeeCount'], axis=1)

from sklearn import preprocessing

category_col = df.select_dtypes(include=['object'])
labelEncoder = preprocessing.LabelEncoder()

mapping_dict = {}
for col in category_col:
    df[col] = labelEncoder.fit_transform(df[col])

    le_name_mapping = dict(zip(labelEncoder.classes_,
                               labelEncoder.transform(labelEncoder.classes_)))

    mapping_dict[col] = le_name_mapping
print(mapping_dict)

# Path data dan model
data_path = df
model_path = 'model.pkl'

# Pilih row untuk diprediksi
row_index = 27
data_row = df.iloc[row_index]

# Load model
model = joblib.load(model_path)

# Masukkan kolom fitur
features = data_row.drop('Attrition')

# Prediksi model
prediction = model.predict([features])[0]

# Label sebenarnya dari row yang diprediksi
real_label = data_row['Attrition']

print("Predicted outcome:", prediction)
print("Real label:", real_label)